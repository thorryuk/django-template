{% extends 'pln/backend/layout/base_layout.html' %}
{% load static %}


{% block css %}
    <link rel="stylesheet" href="{% static '/assets/vendor_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css' %}">
    <link rel="stylesheet" href="{% static '/assets/vendor_components/select2/dist/css/select2.min.css' %}">
{% endblock %}
    

{% block javascript %}
    <script src="{% static '/assets/vendor_components/select2/dist/js/select2.full.js' %}"></script>
    <script src="{% static '/assets/vendor_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.js' %}"></script>
    <script type="text/javascript">
        $(function () {
            "use strict";

            $('.select2').select2();

            //Date picker
            $('#tgl_reksis').datepicker({
                autoclose: true,
                format: 'dd/mm/yyyy',
                disableTouchKeyboard: true
            });

            $('#tgl_berlaku').datepicker({
                autoclose: true,
                format: 'dd/mm/yyyy',
                disableTouchKeyboard: true
            });
        });

        $(document).ready(function () {
            $('#div-footer').prop('hidden', true)
            $('#status').change(function(){
                let value = $(this).val();
                if (value == 1) {
                    $('#div-catatan').prop('disabled', true)
                    $('#div-catatan').prop('hidden', true)
                    $('#div-url').prop('disabled', false)
                    $('#div-url').prop('hidden', false)
                    $('#div-biaya').prop('hidden', false)
                    $('#div-footer').prop('hidden', true)
                    $('#tgl_reksis').prop('required', true)
                    $('#tgl_berlaku').prop('required', true)
                    $('#biaya_material').prop('required', true)
                    $('#biaya_jasa').prop('required', true)
                    $('#biaya_investasi').prop('required', true)
                } else {
                    $('#div-catatan').prop('disabled', false)
                    $('#div-catatan').prop('hidden', false)
                    $('#div-url').prop('disabled', true)
                    $('#div-url').prop('hidden', true)
                    $('#div-biaya').prop('hidden', true)
                    $('#div-footer').prop('hidden', false)
                    $('#tgl_reksis').prop('required', false)
                    $('#tgl_berlaku').prop('required', false)
                    $('#biaya_material').prop('required', false)
                    $('#biaya_jasa').prop('required', false)
                    $('#biaya_investasi').prop('required', false)
                }
            })
        })
    </script>
{% endblock %}
    

{% block content %}

    {% if request.COOKIES.success_msg %}
        <div class="alert alert-success alert-dismissable">
					<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                    {{ request.COOKIES.success_msg }} </div>
    {% endif %}

    {% if request.COOKIES.error_msg %}
        <div class="alert alert-danger alert-dismissable">
					<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                    {{ request.COOKIES.error_msg }} </div>
    {% endif %}

    <form method="post">
    {% csrf_token %}
        <div class="box">
            <div class="box-header with-border">
                <h3 class="box-title">Verifikasi Permohonan</h3>
            </div>
            <div class="box-body">
                <div class="row">
                    <!-- LEFT COLUMN -->
                    <div class="col-md-6 col-12">
                        <div class="form-group">
                            <label>Status<span class="required_field">*</span> : </label>
                            <select class="form-control select2 w-p100" name="status" id="status" required>
                                <option>--- Status --- </option>
                                <option value="1">Diterima</option>
                                <option value="0">Dibatalkan</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Nota Dinas<span class="required_field">*</span> : </label>
                            <div class="controls">
                                <input type="text" name="nota_dinas" class="form-control" autocomplete="off" required/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>No. Pendaftaran<span class="required_field">*</span> : </label>
                            <div class="controls">
                                <input type="text" name="no_pendaftaran" class="form-control" autocomplete="off" required/>
                            </div>
                        </div>
                        <div class="form-group" id="div-url">
                            <label>URL Meet<span class="required_field">*</span> : </label>
                            <div class="controls">
                                <input type="text" name="url_meet" class="form-control" autocomplete="off"/>
                            </div>
                        </div>
                    </div>
                    <!-- RIGHT COLUMN -->
                    <div class="col-md-6 col-12">
                        <div class="form-group" id="div-catatan">
                            <label>Catatan<span class="required_field">*</span> : </label>
                            <div class="controls">
                                <textarea rows="8" name="catatan" id="catatan" class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box-footer" id="div-footer">
                <a href="{% url 'permohonan_unit_list' id=id %}" class="btn btn-danger">
                    <i class="fa fa-chevron-left "></i> Back
                </a>
                <div class="pull-right">
                    <button type="submit" class="btn btn-primary" style="margin-bottom: 10px;" id="save">
                        <i class="fa fa-save "></i> Save
                    </button>
                </div>
            </div>
        </div>

        <div class="box" id="div-biaya">
            <div class="box-header with-border">
                <h3 class="box-title">Kajian Biaya</h3>
            </div>
            <div class="box-body">
                <div class="form-group form-row">
                    <div class="col-6">
                        <label>Tanggal Reksis : <span class="text-danger">*</span></label>
                        <div class="controls">
                            <input type="text" name="tgl_reksis" id="tgl_reksis" class="form-control" data-inputmask="'alias': 'dd/mm/yyyy'" data-mask required/>
                        </div>
                    </div>
                    <div class="col-6">
                        <label>Tanggal Berlaku : <span class="text-danger">*</span></label>
                        <div class="controls">
                            <input type="text" name="tgl_berlaku" id="tgl_berlaku" class="form-control" data-inputmask="'alias': 'dd/mm/yyyy'" data-mask required/>
                        </div>
                    </div>
                </div>
                <div class="form-group form-row">
                    <div class="col-6">
                        <label>Biaya Material : <span class="text-danger">*</span></label>
                        <div class="controls">
                            <input type="number" step="0.01" autocomplete="off" name="biaya_material" id="biaya_material" class="form-control dis" required/>
                        </div>
                    </div>
                    <div class="col-6">
                        <label>Biaya Jasa : <span class="text-danger">*</span></label>
                        <div class="controls">
                            <input type="number" step="0.01" autocomplete="off" name="biaya_jasa" id="biaya_jasa" class="form-control dis" required/>
                        </div>
                    </div>
                </div>
                <div class="form-group form-row">
                    <div class="col-6">
                        <label>Biaya Investasi : <span class="text-danger">*</span></label>
                        <div class="controls">
                            <input type="text" autocomplete="off" name="biaya_investasi" id="biaya_investasi" class="form-control dis" required/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box-footer">
                <a href="{% url 'permohonan_unit_list' id=id %}" class="btn btn-danger">
                    <i class="fa fa-chevron-left "></i> Back
                </a>
                <div class="pull-right">
                    <button type="submit" class="btn btn-primary" style="margin-bottom: 10px;" id="save">
                        <i class="fa fa-save "></i> Save
                    </button>
                </div>
            </div>
        </div>
    </form>



{% endblock %}